<!-- Instructions: This is the template you will use to type up your responses to the exercises and the on your own questions. To produce a document that you can print out and turn in just click on Knit HTML above. All you need to do to complete the lab is to type up your BRIEF answers and the R code (when necessary) in the spaces provided below. If you want to find out more about the markdown language click on the MD icon. -->

Lab 9
========================================================

#### Author: Colm Kennedy


**Load data:**

```{r}
#install.packages('printr')
#install.packages('xtable')
require('printr')
require('xtable')
#download.file('https://mmmlab.org/courses/psych400/data/mlb11.RData',
#              destfile='~/R/data/mlb11.RData')
load("~/R/data/mlb11.RData")
```


#### Exercise 1:

In order to display the relationship between two numerical values (at_bats and runs), I would use a scatterplot. In the plot below, I observed a mild positive linear relationship. In the absence of more highly correlated variables, I would feel comfortable using a linear model to predict the number of runs. There is a linear correlation visible, so it is likely the model would provide some information about runs. Because the correlation appears not to be incredibly strong, I would prefer to find a variable with a stronger correlation.

<!--Insert any code that should be run in the console into the block below-->
```{r}
# use scatterplot
plot(mlb11$at_bats, mlb11$runs)
cor(mlb11$runs, mlb11$at_bats)
```

#### Exercise 2:

Runs and at_bats have a positive linear correlation. The correlation is 0.611, which is a moderately strong correlation. There is an unusual observation around 5500 at_bats, the matched number of runs is much higher than the rest of the data, at around 850 runs. We would expect somewhere in the region of 700 runs for an at_bats of 5500.

#### Exercise 3:

After running plot_ss several times, the best sum of squares I could obtain was 126024.3. My first try was 129803, then on my second try I got my best score. Each attempt beyond that was much higher, going as high as 187887.

<!--Insert any code that should be run in the console into the block below-->
```{r}
plot_ss(x = mlb11$at_bats, y = mlb11$runs, showSquares = TRUE)

```


#### Exercise 4:

- Estimate dived by standard error is the t value
- larger t value means stronger predictor
- r^2 tells you the same

y_hat = 415.2389 + 1.8345 * homeruns

The slope tells us how many more runs we expect from one additional home run. According to this model, for each home run, we expect a 1.8345 increase in total runs. This makes sense, because a home run guarantees at least one run, and our slope is greater than 1. I am not entirely sure on my knowledge of baseball, but I believe the maximum amount of runs possible from one home run is 4. Our slope is also less than 4. It is logical that a home run should increase total runs by 1.8345, because: 1 < 1.8345 < 4. 

<!--Insert any code that should be run in the console into the block below-->
```{r}
# runs on at_bats
m1 <- lm(runs ~ at_bats, data = mlb11)

# runs on homeruns
m2 <- lm(runs ~ homeruns, data = mlb11)
summary(m2)
xtable(summary(m2))

# equation of regression line in the form of a function
y_hat_homeruns <- function(homeruns){
  # Takes number of homeruns, outputs expected number of runs
  return(415.2389 + 1.8345 * homeruns)
}

```

#### Exercise 5:

The team manager would expect 729 runs. This is an overestimate of 16 runs, the actual amount of runs for a team with 5579 at bats is 713. This also means the residual for this prediction is 16 runs. 

<!--Insert any code that should be run in the console into the block below-->
```{r}
plot(mlb11$runs ~ mlb11$at_bats)
abline(m1)

# using formula from class
prediction = m1$coefficients[2]*5579+m1$coefficients[1]
prediction

mlb11$runs[mlb11$at_bats==5579]

# dont use this for lab, just for checking
#plot(m1)
```

#### Exercise 6:

The observed number of runs (713) for the team with 5579 at-bats falls in the percentile interval. In fact, it falls very close to the regression line.

<!--Insert any code that should be run in the console into the block below-->
```{r}
plot_PI(mlb11$at_bats,mlb11$runs, 0.95)
# adding a line at 5,579 at-bats and 713 runs to aid in visualization
abline(v=5579, col='blue')
abline(h = 713, col = 'blue')
```

#### Exercise 7:

<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### Exercise 8:

<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### Exercise 9:

<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### Exercise 10:

<!--Insert any code that should be run in the console into the block below-->
```{r}

```
* * *

### On your own:


#### 1:
<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### 2:
<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### 3:
<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### 4:
<!--Insert any code that should be run in the console into the block below-->
```{r}

```

#### 5:
<!--Insert any code that should be run in the console into the block below-->
```{r}

```



